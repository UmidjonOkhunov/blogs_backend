(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{64:function(e,t,a){e.exports=a(93)},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),u=a.n(c),l=a(7),o=a(11),i=a(95),s=function(e){var t=e.blog;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(o.b,{to:"/blogs/".concat(t.id)},t.title)),r.a.createElement("td",null," ",t.author," "))},p=function(){var e=Object(l.c)((function(e){return e.blogs.filter((function(t){return t.title.toLowerCase().includes(e.filter)}))}));return r.a.createElement(i.a,{striped:!0},r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement(s,{key:e.id,blog:e})}))))},m=a(36),f=a(8),d=a(4),v=a.n(d),b=a(6),E=a(15),g=a.n(E),h=null,y={getAll:function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h}},e.next=3,g.a.post("/api/blogs",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(b.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,g.a.put("".concat("/api/blogs","/").concat(t),a,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),remove:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h}},e.next=3,g.a.delete("".concat("/api/blogs","/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){h="bearer ".concat(e)}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_BLOG":return e.concat(t.data);case"LIKE":var a=t.data.id,n=e.find((function(e){return e.id===a})),r=Object(m.a)({},n,{likes:n.likes+1});return e.map((function(e){return e.id!==a?e:r}));case"DELETE":var c=t.data.id;return e.filter((function(e){return e.id!==c}));case"INIT_BLOGS":return t.data;default:return e}},O=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return(function(){var n=Object(b.a)(v.a.mark((function n(r){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"SET_NOTIFICATION",notification:t}),setTimeout((function(){r(e(null))}),1e3*a);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.notification;default:return e}},k=a(96),j=a(97),L=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.blogs.filter((function(t){return t.title.includes(e.filter)}))})),a=Object(f.h)().id,n=t.find((function(e){return e.id===a}));if(!n)return null;var c=function(t){var a=Object(m.a)({},t,{likes:t.likes+1});e(function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.update(e,t);case 2:n({type:"LIKE",data:{id:e}});case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t.id,a)),e(O("you voted '".concat(t.title,"'"),10))},u=function(t){e(function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.remove(e);case 2:a({type:"DELETE",data:{id:e}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))};return r.a.createElement("div",null,r.a.createElement("h2",null," ",n.title," "),r.a.createElement(k.a,{variant:"secondary",onClick:function(){return c(n)}},"Like ",r.a.createElement(j.a,{variant:"success"},n.likes))," ",r.a.createElement("div",null,r.a.createElement(k.a,{variant:"secondary",onClick:function(){return u(a)},style:{marginTop:"10px",marginBottom:"10px"}},"Delete")),r.a.createElement("div",null,n.author),r.a.createElement("a",{href:n.url},n.url))},S=function(e){var t=e.user;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(o.b,{to:"/users/".concat(t.id)},t.username)),r.a.createElement("td",null," ",t.blogs.length," "))},I=function(){var e=Object(l.c)((function(e){return e.users}));return console.log("diplaying",e),r.a.createElement(i.a,{striped:!0},r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement(S,{key:e.id,user:e})}))))},T=function(){var e=Object(f.h)().id,t=Object(l.c)((function(t){return t.users.find((function(t){return t.id===e}))})),a=Object(l.c)((function(e){return e.blogs.filter((function(e){return e.author===t.username}))}));return r.a.createElement("div",null,r.a.createElement("h2",null," ",t.username," "),r.a.createElement("h3",null,"Added Blogs"),r.a.createElement(i.a,{striped:!0},r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement(s,{key:e.id,blog:e})})))))},N=a(101),C=a(55),A=function(){var e=Object(l.c)((function(e){return e.notification}));return r.a.createElement(C.a,{in:e},r.a.createElement("div",null,r.a.createElement(N.a,{variant:"success"},e)))},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return t.filter;default:return e}},B=a(98),_=a(57),U=function(){var e=Object(l.b)();return r.a.createElement("div",{style:{paddingTop:10}},r.a.createElement(B.a,{className:"mb-3",onChange:function(t){e({type:"SET_FILTER",filter:t.target.value.toLowerCase()})}},r.a.createElement(_.a,{placeholder:"Search here","aria-label":"Search here","aria-describedby":"basic-addon2"}),r.a.createElement(B.a.Append,null,r.a.createElement(k.a,{variant:"outline-secondary"},"Search"))))},R={login:function(){var e=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.login(e);case 2:n=t.sent,window.localStorage.setItem("loggedUser",JSON.stringify(n)),y.setToken(n.token),a({type:"LOGIN",data:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;default:return e}},z=a(99),J=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.user})),a=Object(f.g)();t&&a.push("/");var n=function(){var t=Object(b.a)(v.a.mark((function t(n){var r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,r=n.target.username.value,n.target.username.value="",c=n.target.password.value,n.target.password.value="",t.next=8,e(D({username:r,password:c}));case 8:a.push("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e(O("Wrong credentials",10));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement(z.a,{onSubmit:n},r.a.createElement(z.a.Group,null,r.a.createElement(z.a.Label,null,"username:"),r.a.createElement(z.a.Control,{type:"text",name:"username"}),r.a.createElement(z.a.Label,null,"password:"),r.a.createElement(z.a.Control,{type:"password",name:"password"}),r.a.createElement(k.a,{variant:"primary",type:"submit"},"Login"),r.a.createElement(o.b,{style:{paddingLeft:"15px"},to:"/signup"},"Sign Up"))))},W=null,P={getAll:function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:W}},e.next=3,g.a.post("/api/users",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(b.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:W}},e.next=3,g.a.put("".concat("/api/users","/").concat(t),a,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),remove:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:W}},e.next=3,g.a.delete("".concat("/api/users","/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){W="bearer ".concat(e)}},H=function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.create(e);case 2:n=t.sent,a({type:"SIGN_UP",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_UP":return e.concat(t.data);case"INIT_USERS":return t.data;default:return e}},V=function(){var e=Object(l.b)(),t=Object(f.g)(),a=function(){var a=Object(b.a)(v.a.mark((function a(n){var r,c,u,l;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),a.prev=1,r=n.target.name.value,n.target.name.value="",c=n.target.username.value,n.target.username.value="",u=n.target.password.value,n.target.password.value="",l=n.target.password2.value,n.target.password2.value="",u===l){a.next=13;break}return e(O("Passwords do not match",10)),a.abrupt("return");case 13:return a.next=15,e(H({username:c,name:r,password:u}));case 15:t.push("/"),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(1),e(O("Wrong credentials",10));case 21:case"end":return a.stop()}}),a,null,[[1,18]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",null,"Signup"),r.a.createElement(z.a,{onSubmit:a},r.a.createElement(z.a.Group,null,r.a.createElement(z.a.Label,null,"Full Name:"),r.a.createElement(z.a.Control,{type:"text",name:"name"}),r.a.createElement(z.a.Label,null,"username:"),r.a.createElement(z.a.Control,{type:"text",name:"username"}),r.a.createElement(z.a.Label,null,"password:"),r.a.createElement(z.a.Control,{type:"password",name:"password"}),r.a.createElement(z.a.Label,null,"repeat your password:"),r.a.createElement(z.a.Control,{type:"password",name:"password2"}),r.a.createElement(k.a,{variant:"primary",type:"submit"},"Signup"))))},M=a(63),q=r.a.forwardRef((function(e,t){var a=Object(n.useState)(!1),c=Object(M.a)(a,2),u=c[0],l=c[1],o={display:u?"none":"",paddingBottom:"10px"},i={display:u?"":"none",paddingBottom:"10px"},s=function(){l(!u)};return Object(n.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement(k.a,{variant:"secondary",onClick:s},e.buttonLabel)),r.a.createElement("div",{style:i},e.children,r.a.createElement(k.a,{variant:"secondary",onClick:s},"cancel")))}));q.displayName="Togglable";var Q=q,X=function(e){var t=e.blogFormRef,a=Object(l.b)();return r.a.createElement("div",null,r.a.createElement("h2",null,"New Blog"),r.a.createElement(z.a,{onSubmit:function(e){e.preventDefault(),t.current.toggleVisibility();var n=e.target.title.value;e.target.title.value="";var r=e.target.url.value;e.target.url.value="";var c,u=window.localStorage.getItem("loggedUser"),l={title:n,author:JSON.parse(u).username,url:r};a((c=l,function(){var e=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.create(c);case 2:a=e.sent,t({type:"NEW_BLOG",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement(z.a.Group,null,r.a.createElement(z.a.Label,null,"title:"),r.a.createElement(z.a.Control,{type:"text",name:"title"}),r.a.createElement(z.a.Label,null,"url:"),r.a.createElement(z.a.Control,{type:"text",name:"url"}),r.a.createElement(k.a,{variant:"primary",type:"submit"},"create"))))},Y=a(102),Z=a(100),$=function(){var e=Object(n.useRef)(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.user})),c={padding:5};Object(n.useEffect)((function(){t(function(){var e=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getAll();case 2:a=e.sent,t({type:"INIT_BLOGS",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t(function(){var e=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAll();case 2:a=e.sent,t({type:"INIT_USERS",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),Object(n.useLayoutEffect)((function(){t(function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=window.localStorage.getItem("loggedUser"))&&(n=JSON.parse(a),y.setToken(n.token),t({type:"LOGIN",data:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]);return r.a.createElement("div",{className:"container"},r.a.createElement(o.a,null,r.a.createElement(Y.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(Y.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(Y.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(Z.a,{className:"mr-auto"},r.a.createElement(Z.a.Link,{href:"#",as:"span"},r.a.createElement(o.b,{style:c,to:"/"},"Home")),r.a.createElement(Z.a.Link,{href:"#",as:"span"},r.a.createElement(o.b,{style:c,to:"/blogs"},"Blogs")),r.a.createElement(Z.a.Link,{href:"#",as:"span"},r.a.createElement(o.b,{style:c,to:"/users"},"Users")),r.a.createElement(Z.a.Link,{href:"#",as:"span"},a&&r.a.createElement("div",null,r.a.createElement("em",null,a.username," logged in")))),r.a.createElement(Z.a,null,r.a.createElement(Z.a.Link,{href:"#",as:"span",className:"mr-sm-2"},a?r.a.createElement("em",{style:c,onClick:function(){t((window.localStorage.clear(),function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT",data:null});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}," ","Logout"," "):r.a.createElement(o.b,{to:"/login"},"Login"))))),r.a.createElement(A,null),r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/blogs/:id"},r.a.createElement(L,null)),r.a.createElement(f.b,{path:"/blogs"},r.a.createElement(p,null)),r.a.createElement(f.b,{path:"/users/:id",render:function(){return a?r.a.createElement(T,null):r.a.createElement(f.a,{to:"/login"})}}),r.a.createElement(f.b,{path:"/users",render:function(){return a?r.a.createElement(I,null):r.a.createElement(f.a,{to:"/login"})}}),r.a.createElement(f.b,{path:"/login"},r.a.createElement(J,null)),r.a.createElement(f.b,{path:"/signup"},r.a.createElement(V,null)),r.a.createElement(f.b,{path:"/",render:function(){return r.a.createElement("div",null,r.a.createElement(U,null),a&&r.a.createElement(Q,{buttonLabel:"new blog",ref:e},r.a.createElement(X,{blogFormRef:e})),r.a.createElement(p,null))}})),r.a.createElement("div",{className:"container"},r.a.createElement("i",null,"Blog app, Department of Computer Science 2020"))))},ee=a(24),te=a(61),ae=a(62),ne=Object(ee.combineReducers)({blogs:w,notification:x,filter:G,user:F,users:K}),re=Object(ee.createStore)(ne,Object(ae.composeWithDevTools)(Object(ee.applyMiddleware)(te.a)));u.a.render(r.a.createElement(l.a,{store:re},r.a.createElement($,null)),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.47a5a180.chunk.js.map